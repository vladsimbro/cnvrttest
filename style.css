:root{
  --font-pixel: "Press Start 2P", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --font-pixel-ui: "VT323", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --accent: #2b7be4;
  --accent-600: #1a5fc1;
  --accent-r: 43;
  --accent-g: 123;
  --accent-b: 228;

  --bg0: #0b0f12;
  --bg1: #0f151a;
  --bg2: #151d22;
  --panel: #1a252c;
  --panel2: #202e37;
  --text: #e9f0f5;
  --muted: rgba(233,240,245,0.72);
  --border: rgba(233,240,245,0.14);
  --border2: rgba(233,240,245,0.20);

  --ok: #28d17c;
  --warn: #ffb020;
  --bad: #ff4d4d;

  --px: 2px;
  --s-1: 6px;
  --s-2: 10px;
  --s-3: 14px;
  --s-4: 18px;
  --s-5: 24px;
  --maxw: 1100px;

  --shadow-step: 0 var(--px) 0 rgba(0,0,0,0.55);
  --shadow-step-inset: inset 0 var(--px) 0 rgba(255,255,255,0.06), inset 0 calc(var(--px) * -1) 0 rgba(0,0,0,0.35);

  --ring: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.55);
  color-scheme: dark;
}

:root[data-theme="light"], html[data-theme="light"]{
  color-scheme: light;
  --bg0: #d7e0d2;
  --bg1: #cdd9c6;
  --bg2: #c1cfb9;
  --panel: #f2f6ef;
  --panel2: #e7efe1;
  --text: #121714;
  --muted: rgba(18,23,20,0.72);
  --border: rgba(18,23,20,0.16);
  --border2: rgba(18,23,20,0.22);
  --shadow-step: 0 var(--px) 0 rgba(0,0,0,0.28);
  --shadow-step-inset: inset 0 var(--px) 0 rgba(255,255,255,0.55), inset 0 calc(var(--px) * -1) 0 rgba(0,0,0,0.14);
}

*{ box-sizing: border-box; }
html, body{ height: 100%; }
body{
  margin: 0;
  font-family: var(--font-pixel-ui);
  font-size: 20px;
  line-height: 1.25;
  letter-spacing: 0.1px;
  color: var(--text);
  background:
    linear-gradient(180deg, rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.06), transparent 42%),
    linear-gradient(180deg, var(--bg0), var(--bg1) 55%, var(--bg2));
  padding:
    calc(12px + env(safe-area-inset-top))
    calc(12px + env(safe-area-inset-right))
    calc(12px + env(safe-area-inset-bottom))
    calc(12px + env(safe-area-inset-left));
  image-rendering: pixelated;
}

.container{ max-width: var(--maxw); margin: 0 auto; }

.visually-hidden{
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px,1px,1px,1px);
  white-space: nowrap;
}

:focus:not(:focus-visible){ outline: none; }
:focus-visible{
  outline: var(--px) solid var(--ring);
  outline-offset: var(--px);
}

a{ color: inherit; }

@media (prefers-reduced-motion: reduce){
  *, *::before, *::after{
    transition-duration: 1ms !important;
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    scroll-behavior: auto !important;
  }
}

.app-shell{ display:flex; flex-direction:column; gap: var(--s-4); }

.site-header{
  position: sticky;
  top: calc(8px + env(safe-area-inset-top));
  z-index: 1200;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: var(--s-3);
  padding: 12px;
  border: var(--px) solid var(--border);
  background: var(--panel);
  box-shadow: var(--shadow-step);
}

.header-left{ display:flex; align-items:center; gap: 12px; min-width: 0; }

.title{
  margin: 0;
  font-family: var(--font-pixel);
  font-size: 12px;
  line-height: 1.2;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.header-controls{ display:flex; align-items:center; gap: 8px; flex-wrap: wrap; justify-content:flex-end; }

.icon-btn{
  appearance: none;
  border: var(--px) solid var(--border2);
  background: var(--panel2);
  color: var(--text);
  padding: 10px 10px;
  min-width: 40px;
  min-height: 40px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow: var(--shadow-step), var(--shadow-step-inset);
  cursor: pointer;
  transition: transform 90ms steps(1,end), filter 90ms steps(1,end), box-shadow 90ms steps(1,end);
}

.icon-btn svg{ display:block; }

.icon-btn:hover{ filter: brightness(1.07); }
.icon-btn:active{
  transform: translateY(var(--px));
  box-shadow: 0 var(--px) 0 rgba(0,0,0,0.55);
}

.palette-control{ position: relative; }

.palette-popover{
  z-index: 1500;
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  width: 272px;
  padding: 12px;
  border: var(--px) solid var(--border2);
  background: var(--panel);
  box-shadow: var(--shadow-step);
}

.palette-popover[aria-hidden="true"]{ display:none; }
.palette-popover[aria-hidden="false"]{ display:block; }


.palette-presets{ display:grid; grid-template-columns: repeat(8, 1fr); gap: 6px; margin-bottom: 10px; }

.palette-presets button{
  width: 24px;
  height: 24px;
  border: var(--px) solid rgba(0,0,0,0.55);
  box-shadow: var(--shadow-step-inset);
  cursor: pointer;
  padding: 0;
}

.palette-custom{ display:flex; align-items:center; justify-content: space-between; gap: 10px; }

.palette-custom input[type="color"]{
  width: 48px;
  height: 34px;
  border: var(--px) solid var(--border2);
  background: transparent;
  padding: 0;
}

.small{ font-size: 18px; opacity: 0.92; }

.palette-actions{ display:flex; justify-content:flex-end; margin-top: 10px; }

.panel{
  border: var(--px) solid var(--border);
  background: var(--panel);
  box-shadow: var(--shadow-step);
  padding: var(--s-4);
}

.tabs{
  display:flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: var(--s-4);
}

.tab-btn{
  appearance: none;
  border: var(--px) solid var(--border2);
  background: var(--panel2);
  color: var(--text);
  padding: 10px 12px;
  display:inline-flex;
  align-items:center;
  gap: 10px;
  box-shadow: var(--shadow-step), var(--shadow-step-inset);
  cursor: pointer;
  font-family: var(--font-pixel);
  font-size: 11px;
  line-height: 1.1;
  text-transform: uppercase;
  transition: transform 120ms steps(1,end), filter 120ms steps(1,end);
}

.tab-btn .tab-icon{ display:inline-flex; }

.tab-btn:hover{ filter: brightness(1.06); }
.tab-btn:active{ transform: translateY(var(--px)); }

.tab-btn.active{
  border-color: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.65);
  background: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.12);
}

.tab-panel{ display:none; }
.tab-panel.active{ display:block; }

.block{ display:flex; flex-direction:column; gap: 8px; margin-bottom: var(--s-4); }

.field-label{
  font-family: var(--font-pixel);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  opacity: 0.92;
}

.textarea-wrap{ position: relative; }

textarea, input[type="text"], input[type="number"], select{
  width: 100%;
  border: var(--px) solid var(--border2);
  background: rgba(0,0,0,0.10);
  color: var(--text);
  padding: 12px;
  font-family: var(--font-pixel-ui);
  font-size: 20px;
  line-height: 1.2;
  box-shadow: var(--shadow-step-inset);
  resize: vertical;
}

:root[data-theme="light"] textarea,
:root[data-theme="light"] input[type="text"],
:root[data-theme="light"] input[type="number"],
:root[data-theme="light"] select{
  background: rgba(255,255,255,0.75);
}

textarea{ min-height: 148px; }

textarea[readonly]{ opacity: 0.92; }

textarea::placeholder, input::placeholder{ color: rgba(233,240,245,0.55); }
:root[data-theme="light"] textarea::placeholder, :root[data-theme="light"] input::placeholder{ color: rgba(18,23,20,0.55); }

.line-count{
  position:absolute;
  right: 10px;
  bottom: 10px;
  font-family: var(--font-pixel);
  font-size: 10px;
  opacity: 0.75;
  padding: 6px 8px;
  border: var(--px) solid var(--border);
  background: var(--panel2);
  box-shadow: var(--shadow-step);
  pointer-events:none;
}

.controls-row{ display:flex; align-items:center; justify-content: space-between; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
.controls-left, .controls-right{ display:flex; align-items:center; gap: 10px; flex-wrap: wrap; }
.controls-nowrap{ flex-wrap: nowrap; }

button{
  font-family: var(--font-pixel);
}

.btn-animate, .ghost, .floating{
  appearance: none;
  border: var(--px) solid var(--border2);
  background: var(--panel2);
  color: var(--text);
  padding: 10px 12px;
  display:inline-flex;
  align-items:center;
  gap: 10px;
  cursor: pointer;
  box-shadow: var(--shadow-step), var(--shadow-step-inset);
  transition: transform 90ms steps(1,end), filter 90ms steps(1,end), box-shadow 90ms steps(1,end);
  text-transform: uppercase;
  font-size: 11px;
  line-height: 1.1;
}

.ghost{
  background: var(--panel2);
  border-color: var(--border2);
}

.btn-icon{ display:inline-flex; }

.btn-animate:hover, .ghost:hover, .floating:hover{ filter: brightness(1.07); }

.btn-animate:active, .ghost:active, .floating:active{
  transform: translateY(var(--px));
  box-shadow: 0 var(--px) 0 rgba(0,0,0,0.55);
}

.badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width: 24px;
  height: 20px;
  padding: 0 6px;
  border: var(--px) solid var(--border2);
  background: var(--panel2);
  box-shadow: var(--shadow-step-inset);
  font-family: var(--font-pixel);
  font-size: 10px;
}

.update-notice{
  border: var(--px) solid rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.50);
  background: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.14);
  padding: 12px;
  box-shadow: var(--shadow-step);
  font-family: var(--font-pixel-ui);
  font-size: 20px;
}

.modal{
  position: fixed;
  inset: 0;
  display:none;
  align-items:center;
  justify-content:center;
  padding: 16px;
  z-index: 2000;
}

.modal.open{ display:flex; }

.modal-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,0.55);
}

.modal-content{
  position: relative;
  width: min(720px, 100%);
  border: var(--px) solid var(--border2);
  background: var(--panel);
  box-shadow: 0 0 0 calc(var(--px) * 2) rgba(0,0,0,0.45), var(--shadow-step);
  padding: 14px;
}

.modal-header{ display:flex; align-items:flex-start; justify-content: space-between; gap: 10px; margin-bottom: 12px; }
.modal-title{
  margin: 0;
  font-family: var(--font-pixel);
  font-size: 12px;
  text-transform: uppercase;
  line-height: 1.2;
}

.close-btn{
  appearance:none;
  border: var(--px) solid var(--border2);
  background: var(--panel2);
  color: var(--text);
  width: 40px;
  height: 40px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  box-shadow: var(--shadow-step), var(--shadow-step-inset);
  transition: transform 120ms steps(1,end), filter 120ms steps(1,end);
}

.close-btn:hover{ filter: brightness(1.07); }
.close-btn:active{ transform: translateY(var(--px)); }

.modal-body{ font-family: var(--font-pixel-ui); font-size: 20px; }

.table{
  width: 100%;
  border-collapse: collapse;
  border: var(--px) solid var(--border2);
}

.table th, .table td{
  border: var(--px) solid var(--border);
  padding: 12px;
  vertical-align: top;
  font-size: 18px;
}

.table th{ font-family: var(--font-pixel); font-size: 11px; text-transform: uppercase; }

.toast{
  border: var(--px) solid var(--border2);
  background: var(--panel);
  box-shadow: var(--shadow-step);
  padding: 10px 12px;
  font-size: 18px;
}

#loader{
  position: fixed;
  inset: 0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index: 3000;
  background: rgba(0,0,0,0.55);
}

#loader.show{ display:flex; }

.dots-container{ display:flex; gap: 10px; }
.dot{
  width: 14px;
  height: 14px;
  background: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.85);
  border: var(--px) solid rgba(0,0,0,0.65);
  box-shadow: var(--shadow-step);
  animation: dot 700ms steps(2,end) infinite;
}

.dot:nth-child(2){ animation-delay: 100ms; }
.dot:nth-child(3){ animation-delay: 200ms; }

@keyframes dot{
  0%{ transform: translateY(0); filter: brightness(1); }
  50%{ transform: translateY(calc(var(--px) * -2)); filter: brightness(1.15); }
  100%{ transform: translateY(0); filter: brightness(1); }
}

[data-tooltip]{ position: relative; }

[data-tooltip]:hover::after{
  content: attr(data-tooltip);
  position:absolute;
  left: 50%;
  transform: translateX(-50%);
  top: calc(100% + 10px);
  white-space: nowrap;
  padding: 8px 10px;
  border: var(--px) solid var(--border2);
  background: var(--panel);
  box-shadow: var(--shadow-step);
  font-family: var(--font-pixel);
  font-size: 10px;
  text-transform: uppercase;
  z-index: 3000;
}

@media (max-width: 900px){
  .title{ font-size: 12px; }
  .panel{ padding: 14px; }
}

@media (max-width: 560px){
  .header-controls{ gap: 6px; }
  .tab-btn{ width: 100%; justify-content:center; }
  textarea{ min-height: 132px; }
  .controls-row{ align-items: stretch; }
  .controls-left, .controls-right{ width: 100%; justify-content: space-between; }
  .btn-animate, .ghost, .floating{ width: 100%; justify-content:center; }
  .palette-popover{ width: min(320px, 95vw); }
}

.btn-animate{ background: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.22); border-color: rgba(var(--accent-r),var(--accent-g),var(--accent-b),0.55); }
